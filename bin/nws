var argv = require('optimist')
		.default('p', 3030)
		.default('d', '')
		.boolean('v')
		.argv,
	express = require('express'),
	server = express.createServer(),
	root = require('path').join(process.cwd(), argv.d);

server.configure(function () {
	server.use(express.static(root));
	if (argv.v)
		server.use(require('./verbose')());
});

server.listen(argv.p, function() {
	console.log('Listening on port %d with root %s', argv.p, root);
});